<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WeCare Healthcare</title>

  <link rel="stylesheet" href="front.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
    rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <link rel="icon" href="logo.jpg" type="image/jpg">

  <!-- Mapbox CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
  <link rel="stylesheet"
    href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css"
    type="text/css">

</head>

<body>
  <div>

    <nav class="navbar">
      <div class="logo-container">
        <img src="logo.jpg" alt="logo" class="logo">
      </div>
      <div class="navbar-title">
        <h2 font>Hospital Finder</h2>
      </div>
      <div class="nav-buttons">
        <button class="btn" onclick=window.location.href='http://localhost:3001/login' style="color:white;">
          Log in
        </button>
        <button class="btn" onclick=window.location.href='http://localhost:3001/signup' style="color:white;">
          Sign Up
        </button>
      </div>
    </nav>

    <!-- Header Section with Background Image -->
    <header class="header">
      <div class="header-content">
        <h1>Feel better about finding healthcare</h1>
        <p>At WeCare, we take the guesswork out of finding the right doctors, hospitals, and care for you and your
          family.</p>
      </div>
    </header>

    <!-- Search Section -->
    <div class="search-section">
      <form>
        <div class="search-box">
          <input type="text" placeholder="Search Doctor, Conditions, or Procedures" class="search-input">
          <input type="text" placeholder="Set your location" class="search-input">
          <button class="search-btn" type="submit">Search</button>
        </div>
      </form>
    </div>

    <!-- Map Section -->
    <section class="map-section mt-4">
      <div class="container-fluid">
        <!-- This is the map container -->
        <div id='map' style="height: 500px;"></div>
      </div>
    </section>

    <section class="search-process text-center mt-3"></section>
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-12 p-3">
          <div class="icon mb-3">
            <i class="fa fa-h-square" style="font-size:45px;color:#00aa6c"></i>
          </div>
          <div class="search-title">
            <h5>Find nearest hospital</h5>
          </div>
          <div class="description">
            <p>Search for the nearest medical centres by entering your location or city name.</p>
          </div>
        </div>
        <div class="col-lg-4 col-md-12 p-3">
          <div class="icon mb-3">
            <i class="fa fa-map-marker" style="font-size:45px;color:#00aa6c"></i>
          </div>
          <div class="search-title">
            <h5>Get directions</h5>
          </div>
          <div class="description">
            <p>On the map, click on your current location and the hospital of your choice and get the route.</p>
          </div>
        </div>
        <div class="col-lg-4 col-md-12 p-3">
          <div class="icon mb-3">
            <i class="fa fa-star" style="font-size:45px;color:#00aa6c"></i>
          </div>
          <div class="search-title">
            <h5>Review services</h5>
          </div>
          <div class="description">
            <p>Leave a review of the services provided at your selected medical centre</p>
          </div>
        </div>
      </div>
    </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
      <p>&copy; 2024 WeCare. All Rights Reserved.</p>
    </footer>
  </div>

  <!-- Mapbox JS -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js'></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>

  <script>
    // Smooth scroll to map when the form is submitted
    document.addEventListener("DOMContentLoaded", () => {
      let myForm = document.querySelector("form").addEventListener("submit", (e) => {
        e.preventDefault();
        document.querySelector('#map').scrollIntoView({
          behavior: 'smooth'
        });
        form.reset(); // Reset form after submission
      })
    });

    // Mapbox access token
    mapboxgl.accessToken = 'pk.eyJ1IjoiZXN0aGVyY2F0ZXYiLCJhIjoiY2wyN2w3M256MDBqYjN0bW1uOG16ZzVqdiJ9.apozKCwK2RIwWPweckfjSg';

    // Get the user's location
    navigator.geolocation.getCurrentPosition(successLocation, errorLocation, {
      enableHighAccuracy: true
    });

    // Handle success location
    function successLocation(position) {
      console.log(position);
      setUpMap([position.coords.longitude, position.coords.latitude]);
    }

    // Handle error location
    function errorLocation() {
      setUpMap([36.817223, -1.286389]); // Default location (Nairobi)
    }

    // Set up the map
    function setUpMap(center) {
      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/esthercatev/cl29khs4v000514ms5eiyerq3', // Your custom style
        center: center,
        zoom: 15
      });

      // Add direction control
      map.addControl(
        new MapboxDirections({
          accessToken: mapboxgl.accessToken
        }),
        'top-left'
      );

      // Add a draggable marker
      const marker = new mapboxgl.Marker({
        color: "#ff0000",
        draggable: true
      }).setLngLat([36.9011852, -1.318583]) // Coordinates of the marker
        .addTo(map);

      // Add navigation controls (zoom/rotate)
      map.addControl(new mapboxgl.NavigationControl());
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
</body>

</html>
